ace.define("ace/ext/elastic_tabstops_lite",["require","exports","module","ace/editor","ace/config"],function(i,e,h){var j=function(b){this.$editor=b;var d=this,a=[],c=!1;this.onAfterExec=function(){c=!1,d.processRows(a),a=[]},this.onExec=function(){c=!0},this.onChange=function(f){var m=f.data.range;c&&(a.indexOf(m.start.row)==-1&&a.push(m.start.row),m.end.row!=m.start.row&&a.push(m.end.row))}};(function(){this.processRows=function(a){this.$inChange=!0;var r=[];for(var f=0,n=a.length;f<n;f++){var c=a[f];if(r.indexOf(c)>-1){continue}var o=this.$findCellWidthsForBlock(c),l=this.$setBlockCellWidthsToMax(o.cellWidths),s=o.firstRow;for(var t=0,b=l.length;t<b;t++){var d=l[t];r.push(s),this.$adjustRow(s,d),s++}}this.$inChange=!1},this.$findCellWidthsForBlock=function(b){var f=[],a,c=b;while(c>=0){a=this.$cellWidthsForRow(c);if(a.length==0){break}f.unshift(a),c--}var n=c+1;c=b;var d=this.$editor.session.getLength();while(c<d-1){c++,a=this.$cellWidthsForRow(c);if(a.length==0){break}f.push(a)}return{cellWidths:f,firstRow:n}},this.$cellWidthsForRow=function(a){var r=this.$selectionColumnsForRow(a),f=[-1].concat(this.$tabsForRow(a)),n=f.map(function(k){return 0}).slice(1),c=this.$editor.session.getLine(a);for(var o=0,l=f.length-1;o<l;o++){var s=f[o]+1,t=f[o+1],b=this.$rightmostSelectionInCell(r,t),d=c.substring(s,t);n[o]=Math.max(d.replace(/\s+$/g,"").length,b-s)}return n},this.$selectionColumnsForRow=function(b){var c=[],a=this.$editor.getCursorPosition();return this.$editor.session.getSelection().isEmpty()&&b==a.row&&c.push(a.column),c},this.$setBlockCellWidthsToMax=function(u){var d=!0,l,o,c,b=this.$izip_longest(u);for(var n=0,r=b.length;n<r;n++){var s=b[n];if(!s.push){console.error(s);continue}s.push(NaN);for(var C=0,f=s.length;C<f;C++){var t=s[C];d&&(l=C,c=0,d=!1);if(isNaN(t)){o=C;for(var a=l;a<o;a++){u[a][n]=c}d=!0}c=Math.max(c,t)}}return u},this.$rightmostSelectionInCell=function(b,f){var a=0;if(b.length){var c=[];for(var n=0,d=b.length;n<d;n++){b[n]<=f?c.push(n):c.push(0)}a=Math.max.apply(Math,c)}return a},this.$tabsForRow=function(b){var d=[],a=this.$editor.session.getLine(b),c=/\t/g,f;while((f=c.exec(a))!=null){d.push(f.index)}return d},this.$adjustRow=function(s,c){var l=this.$tabsForRow(s);if(l.length==0){return}var p=0,E=-1,a=this.$izip(c,l);for(var n=0,d=a.length;n<d;n++){var f=a[n][0],t=a[n][1];E+=1+f,t+=p;var b=E-t;if(b==0){continue}var r=this.$editor.session.getLine(s).substr(0,t),u=r.replace(/\s*$/g,""),o=r.length-u.length;b>0&&(this.$editor.session.getDocument().insertInLine({row:s,column:t+1},Array(b+1).join(" ")+"	"),this.$editor.session.getDocument().removeInLine(s,t,t+1),p+=b),b<0&&o>=-b&&(this.$editor.session.getDocument().removeInLine(s,t+b,t),p+=b)}},this.$izip_longest=function(a){if(!a[0]){return[]}var d=a[0].length,o=a.length;for(var b=1;b<o;b++){var f=a[b].length;f>d&&(d=f)}var c=[];for(var r=0;r<d;r++){var n=[];for(var b=0;b<o;b++){a[b][r]===""?n.push(NaN):n.push(a[b][r])}c.push(n)}return c},this.$izip=function(b,f){var a=b.length>=f.length?f.length:b.length,c=[];for(var n=0;n<a;n++){var d=[b[n],f[n]];c.push(d)}return c}}).call(j.prototype),e.ElasticTabstopsLite=j;var g=i("../editor").Editor;i("../config").defineOptions(g.prototype,"editor",{useElasticTabstops:{set:function(a){a?(this.elasticTabstops||(this.elasticTabstops=new j(this)),this.commands.on("afterExec",this.elasticTabstops.onAfterExec),this.commands.on("exec",this.elasticTabstops.onExec),this.on("change",this.elasticTabstops.onChange)):this.elasticTabstops&&(this.commands.removeListener("afterExec",this.elasticTabstops.onAfterExec),this.commands.removeListener("exec",this.elasticTabstops.onExec),this.removeListener("change",this.elasticTabstops.onChange))}}})});(function(){ace.require(["ace/ext/elastic_tabstops_lite"],function(){})})();