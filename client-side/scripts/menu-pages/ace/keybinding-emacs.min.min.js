ace.define("ace/occur",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/edit_session","ace/search_highlight","ace/lib/dom"],function(n,e,r){function i(){}var t=n("./lib/oop"),q=n("./range").Range,a=n("./search").Search,s=n("./edit_session").EditSession,f=n("./search_highlight").SearchHighlight;t.inherits(i,a),function(){this.enter=function(c,b){if(!b.needle){return !1}var g=c.getCursorPosition();this.displayOccurContent(c,b);var d=this.originalToOccurPosition(c.session,g);return c.moveCursorToPosition(d),!0},this.exit=function(c,b){var g=b.translatePosition&&c.getCursorPosition(),d=g&&this.occurToOriginalPosition(c.session,g);return this.displayOriginalContent(c),d&&c.moveCursorToPosition(d),!0},this.highlight=function(d,b){var c=d.$occurHighlight=d.$occurHighlight||d.addDynamicMarker(new f(null,"ace_occur-highlight","text"));c.setRegexp(b),d._emit("changeBackMarker")},this.displayOccurContent=function(g,d){this.$originalSession=g.session;var c=this.matchingLines(g.session,d),h=c.map(function(j){return j.content}),b=new s(h.join("\n"));b.$occur=this,b.$occurMatchingLines=c,g.setSession(b),this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart,b.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart,this.highlight(b,d.re),b._emit("changeBackMarker")},this.displayOriginalContent=function(b){b.setSession(this.$originalSession),this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart},this.originalToOccurPosition=function(g,d){var c=g.$occurMatchingLines,h={row:0,column:0};if(!c){return h}for(var b=0;b<c.length;b++){if(c[b].row===d.row){return{row:b,column:d.column}}}return h},this.occurToOriginalPosition=function(d,b){var c=d.$occurMatchingLines;return !c||!c[b.row]?b:{row:c[b.row].row,column:b.column}},this.matchingLines=function(d,b){b=t.mixin({},b);if(!d||!b.needle){return[]}var c=new a;return c.set(b),c.findAll(d).reduce(function(k,g){var h=g.start.row,j=k[k.length-1];return j&&j.row===h?k:k.concat({row:h,content:d.getLine(h)})},[])}}.call(i.prototype);var o=n("./lib/dom");o.importCssString(".ace_occur-highlight {\n    border-radius: 4px;\n    background-color: rgba(87, 255, 8, 0.25);\n    position: absolute;\n    z-index: 4;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    box-shadow: 0 0 4px rgb(91, 255, 50);\n}\n.ace_dark .ace_occur-highlight {\n    background-color: rgb(80, 140, 85);\n    box-shadow: 0 0 4px rgb(60, 120, 70);\n}\n","incremental-occur-highlighting"),e.Occur=i}),ace.define("ace/commands/occur_commands",["require","exports","module","ace/config","ace/occur","ace/keyboard/hash_handler","ace/lib/oop"],function(n,e,r){function o(){}var t=n("../config"),q=n("../occur").Occur,a={name:"occur",exec:function(c,b){var g=!!c.session.$occur,d=(new q).enter(c,b);d&&!g&&o.installIn(c)},readOnly:!0},s=[{name:"occurexit",bindKey:"esc|Ctrl-G",exec:function(c){var b=c.session.$occur;if(!b){return}b.exit(c,{}),c.session.$occur||o.uninstallFrom(c)},readOnly:!0},{name:"occuraccept",bindKey:"enter",exec:function(c){var b=c.session.$occur;if(!b){return}b.exit(c,{translatePosition:!0}),c.session.$occur||o.uninstallFrom(c)},readOnly:!0}],f=n("../keyboard/hash_handler").HashHandler,i=n("../lib/oop");i.inherits(o,f),function(){this.isOccurHandler=!0,this.attach=function(c){f.call(this,s,c.commands.platform),this.$editor=c};var b=this.handleKeyboard;this.handleKeyboard=function(g,c,d,h){var j=b.call(this,g,c,d,h);return j&&j.command?j:undefined}}.call(o.prototype),o.installIn=function(c){var b=new this;c.keyBinding.addKeyboardHandler(b),c.commands.addCommands(s)},o.uninstallFrom=function(c){c.commands.removeCommands(s);var b=c.getKeyboardHandler();b.isOccurHandler&&c.keyBinding.removeKeyboardHandler(b)},e.occurStartCommand=a}),ace.define("ace/commands/incremental_search_commands",["require","exports","module","ace/config","ace/lib/oop","ace/keyboard/hash_handler","ace/commands/occur_commands"],function(m,p,k){function i(a){this.$iSearch=a}var n=m("../config"),e=m("../lib/oop"),o=m("../keyboard/hash_handler").HashHandler,l=m("./occur_commands").occurStartCommand;p.iSearchStartCommands=[{name:"iSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(a,b){n.loadModule(["core","ace/incremental_search"],function(c){var d=c.iSearch=c.iSearch||new c.IncrementalSearch;d.activate(a,b.backwards),b.jumpToFirstMatch&&d.next(b)})},readOnly:!0},{name:"iSearchBackwards",exec:function(a,b){a.execCommand("iSearch",{backwards:!0})},readOnly:!0},{name:"iSearchAndGo",bindKey:{win:"Ctrl-K",mac:"Command-G"},exec:function(a,b){a.execCommand("iSearch",{jumpToFirstMatch:!0,useCurrentOrPrevSearch:!0})},readOnly:!0},{name:"iSearchBackwardsAndGo",bindKey:{win:"Ctrl-Shift-K",mac:"Command-Shift-G"},exec:function(a){a.execCommand("iSearch",{jumpToFirstMatch:!0,backwards:!0,useCurrentOrPrevSearch:!0})},readOnly:!0}],p.iSearchCommands=[{name:"restartSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(a){a.cancelSearch(!0)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"searchForward",bindKey:{win:"Ctrl-S|Ctrl-K",mac:"Ctrl-S|Command-G"},exec:function(a,b){b.useCurrentOrPrevSearch=!0,a.next(b)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"searchBackward",bindKey:{win:"Ctrl-R|Ctrl-Shift-K",mac:"Ctrl-R|Command-Shift-G"},exec:function(a,b){b.useCurrentOrPrevSearch=!0,b.backwards=!0,a.next(b)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"extendSearchTerm",exec:function(a,b){a.addString(b)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"extendSearchTermSpace",bindKey:"space",exec:function(a){a.addString(" ")},readOnly:!0,isIncrementalSearchCommand:!0},{name:"shrinkSearchTerm",bindKey:"backspace",exec:function(a){a.removeChar()},readOnly:!0,isIncrementalSearchCommand:!0},{name:"confirmSearch",bindKey:"return",exec:function(a){a.deactivate()},readOnly:!0,isIncrementalSearchCommand:!0},{name:"cancelSearch",bindKey:"esc|Ctrl-G",exec:function(a){a.deactivate(!0)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"occurisearch",bindKey:"Ctrl-O",exec:function(a){var b=e.mixin({},a.$options);a.deactivate(),l.exec(a.$editor,b)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"yankNextWord",bindKey:"Ctrl-w",exec:function(b){var d=b.$editor,a=d.selection.getRangeOfMovements(function(f){f.moveCursorWordRight()}),c=d.session.getTextRange(a);b.addString(c)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"yankNextChar",bindKey:"Ctrl-Alt-y",exec:function(b){var d=b.$editor,a=d.selection.getRangeOfMovements(function(f){f.moveCursorRight()}),c=d.session.getTextRange(a);b.addString(c)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"recenterTopBottom",bindKey:"Ctrl-l",exec:function(a){a.$editor.execCommand("recenterTopBottom")},readOnly:!0,isIncrementalSearchCommand:!0},{name:"selectAllMatches",bindKey:"Ctrl-space",exec:function(b){var d=b.$editor,a=d.session.$isearchHighlight,c=a&&a.cache?a.cache.reduce(function(f,g){return f.concat(g?g:[])},[]):[];b.deactivate(!1),c.forEach(d.selection.addRange.bind(d.selection))},readOnly:!0,isIncrementalSearchCommand:!0},{name:"searchAsRegExp",bindKey:"Alt-r",exec:function(a){a.convertNeedleToRegExp()},readOnly:!0,isIncrementalSearchCommand:!0}],e.inherits(i,o),function(){this.attach=function(c){var b=this.$iSearch;o.call(this,p.iSearchCommands,c.commands.platform),this.$commandExecHandler=c.commands.addEventListener("exec",function(d){return d.command.isIncrementalSearchCommand?(d.stopPropagation(),d.preventDefault(),d.command.exec(b,d.args||{})):undefined})},this.detach=function(b){if(!this.$commandExecHandler){return}b.commands.removeEventListener("exec",this.$commandExecHandler),delete this.$commandExecHandler};var a=this.handleKeyboard;this.handleKeyboard=function(d,f,b,h){if((f===1||f===8)&&b==="v"||f===1&&b==="y"){return null}var c=a.call(this,d,f,b,h);if(c.command){return c}if(f==-1){var g=this.commands.extendSearchTerm;if(g){return{command:g,args:b}}}return{command:"null",passEvent:f==0||f==4}}}.call(i.prototype),p.IncrementalSearchKeyboardHandler=i}),ace.define("ace/incremental_search",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/search_highlight","ace/commands/incremental_search_commands","ace/lib/dom","ace/commands/command_manager","ace/editor","ace/config"],function(f,t,h){function m(){this.$options={wrap:!1,skipCurrent:!1},this.$keyboardHandler=new a(this)}function r(b){return b instanceof RegExp}function d(j){var b=String(j),g=b.indexOf("/"),k=b.lastIndexOf("/");return{expression:b.slice(g+1,k),flags:b.slice(k+1)}}function o(j,b){try{return new RegExp(j,b)}catch(g){return j}}function l(b){return o(b.expression,b.flags)}var n=f("./lib/oop"),p=f("./range").Range,s=f("./search").Search,i=f("./search_highlight").SearchHighlight,u=f("./commands/incremental_search_commands"),a=u.IncrementalSearchKeyboardHandler;n.inherits(m,s),function(){this.activate=function(g,b){this.$editor=g,this.$startPos=this.$currentPos=g.getCursorPosition(),this.$options.needle="",this.$options.backwards=b,g.keyBinding.addKeyboardHandler(this.$keyboardHandler),this.$originalEditorOnPaste=g.onPaste,g.onPaste=this.onPaste.bind(this),this.$mousedownHandler=g.addEventListener("mousedown",this.onMouseDown.bind(this)),this.selectionFix(g),this.statusMessage(!0)},this.deactivate=function(g){this.cancelSearch(g);var b=this.$editor;b.keyBinding.removeKeyboardHandler(this.$keyboardHandler),this.$mousedownHandler&&(b.removeEventListener("mousedown",this.$mousedownHandler),delete this.$mousedownHandler),b.onPaste=this.$originalEditorOnPaste,this.message("")},this.selectionFix=function(b){b.selection.isEmpty()&&!b.session.$emacsMark&&b.clearSelection()},this.highlight=function(j){var b=this.$editor.session,g=b.$isearchHighlight=b.$isearchHighlight||b.addDynamicMarker(new i(null,"ace_isearch-result","text"));g.setRegexp(j),b._emit("changeBackMarker")},this.cancelSearch=function(g){var b=this.$editor;return this.$prevNeedle=this.$options.needle,this.$options.needle="",g?(b.moveCursorToPosition(this.$startPos),this.$currentPos=this.$startPos):b.pushEmacsMark&&b.pushEmacsMark(this.$startPos,!1),this.highlight(null),p.fromPoints(this.$currentPos,this.$currentPos)},this.highlightAndFindWithNeedle=function(k,b){if(!this.$editor){return null}var g=this.$options;b&&(g.needle=b.call(this,g.needle||"")||"");if(g.needle.length===0){return this.statusMessage(!0),this.cancelSearch(!0)}g.start=this.$currentPos;var q=this.$editor.session,w=this.find(q),j=this.$editor.emacsMark?!!this.$editor.emacsMark():!this.$editor.selection.isEmpty();return w&&(g.backwards&&(w=p.fromPoints(w.end,w.start)),this.$editor.selection.setRange(p.fromPoints(j?this.$startPos:w.end,w.end)),k&&(this.$currentPos=w.end),this.highlight(g.re)),this.statusMessage(w),w},this.addString=function(b){return this.highlightAndFindWithNeedle(!1,function(j){if(!r(j)){return j+b}var g=d(j);return g.expression+=b,l(g)})},this.removeChar=function(b){return this.highlightAndFindWithNeedle(!1,function(g){if(!r(g)){return g.substring(0,g.length-1)}var j=d(g);return j.expression=j.expression.substring(0,j.expression.length-1),l(j)})},this.next=function(b){return b=b||{},this.$options.backwards=!!b.backwards,this.$currentPos=this.$editor.getCursorPosition(),this.highlightAndFindWithNeedle(!0,function(g){return b.useCurrentOrPrevSearch&&g.length===0?this.$prevNeedle||"":g})},this.onMouseDown=function(b){return this.deactivate(),!0},this.onPaste=function(b){this.addString(b)},this.convertNeedleToRegExp=function(){return this.highlightAndFindWithNeedle(!1,function(b){return r(b)?b:o(b,"ig")})},this.convertNeedleToString=function(){return this.highlightAndFindWithNeedle(!1,function(b){return r(b)?d(b).expression:b})},this.statusMessage=function(j){var b=this.$options,g="";g+=b.backwards?"reverse-":"",g+="isearch: "+b.needle,g+=j?"":" (not found)",this.message(g)},this.message=function(b){this.$editor.showCommandLine?(this.$editor.showCommandLine(b),this.$editor.focus()):console.log(b)}}.call(m.prototype),t.IncrementalSearch=m;var e=f("./lib/dom");e.importCssString&&e.importCssString(".ace_marker-layer .ace_isearch-result {  position: absolute;  z-index: 6;  -moz-box-sizing: border-box;  -webkit-box-sizing: border-box;  box-sizing: border-box;}div.ace_isearch-result {  border-radius: 4px;  background-color: rgba(255, 200, 0, 0.5);  box-shadow: 0 0 4px rgb(255, 200, 0);}.ace_dark div.ace_isearch-result {  background-color: rgb(100, 110, 160);  box-shadow: 0 0 4px rgb(80, 90, 140);}","incremental-search-highlighting");var v=f("./commands/command_manager");(function(){this.setupIncrementalSearch=function(j,b){if(this.usesIncrementalSearch==b){return}this.usesIncrementalSearch=b;var g=u.iSearchStartCommands,k=b?"addCommands":"removeCommands";this[k](g)}}).call(v.CommandManager.prototype);var c=f("./editor").Editor;f("./config").defineOptions(c.prototype,"editor",{useIncrementalSearch:{set:function(b){this.keyBinding.$handlers.forEach(function(g){g.setupIncrementalSearch&&g.setupIncrementalSearch(this,b)}),this._emit("incrementalSearchSettingChanged",{isEnabled:b})}}})}),ace.define("ace/keyboard/emacs",["require","exports","module","ace/lib/dom","ace/incremental_search","ace/commands/incremental_search_commands","ace/keyboard/hash_handler","ace/lib/keys"],function(p,v,i){var r=p("../lib/dom");p("../incremental_search");var d=p("../commands/incremental_search_commands"),u=function(j,m){var g=this.scroller.getBoundingClientRect(),k=Math.floor((j+this.scrollLeft-g.left-this.$padding)/this.characterWidth),b=Math.floor((m+this.scrollTop-g.top)/this.lineHeight);return this.session.screenToDocumentPosition(b,k)},l=p("./hash_handler").HashHandler;v.handler=new l,v.handler.isEmacs=!0,v.handler.$id="ace/keyboard/emacs";var a=!1,e,s;v.handler.attach=function(b){a||(a=!0,r.importCssString("            .emacs-mode .ace_cursor{                border: 1px rgba(50,250,50,0.8) solid!important;                -moz-box-sizing: border-box!important;                -webkit-box-sizing: border-box!important;                box-sizing: border-box!important;                background-color: rgba(0,250,0,0.9);                opacity: 0.5;            }            .emacs-mode .ace_hidden-cursors .ace_cursor{                opacity: 1;                background-color: transparent;            }            .emacs-mode .ace_overwrite-cursors .ace_cursor {                opacity: 1;                background-color: transparent;                border-width: 0 0 2px 2px !important;            }            .emacs-mode .ace_text-layer {                z-index: 4            }            .emacs-mode .ace_cursor-layer {                z-index: 2            }","emacsMode")),e=b.session.$selectLongWords,b.session.$selectLongWords=!0,s=b.session.$useEmacsStyleLineStart,b.session.$useEmacsStyleLineStart=!0,b.session.$emacsMark=null,b.session.$emacsMarkRing=b.session.$emacsMarkRing||[],b.emacsMark=function(){return this.session.$emacsMark},b.setEmacsMark=function(g){this.session.$emacsMark=g},b.pushEmacsMark=function(j,k){var g=this.session.$emacsMark;g&&this.session.$emacsMarkRing.push(g),!j||k?this.setEmacsMark(j):this.session.$emacsMarkRing.push(j)},b.popEmacsMark=function(){var g=this.emacsMark();return g?(this.setEmacsMark(null),g):this.session.$emacsMarkRing.pop()},b.getLastEmacsMark=function(g){return this.session.$emacsMark||this.session.$emacsMarkRing.slice(-1)[0]},b.emacsMarkForSelection=function(g){var w=this.selection,j=this.multiSelect?this.multiSelect.getAllRanges().length:1,k=w.index||0,x=this.session.$emacsMarkRing,m=x.length-(j-k),q=x[m]||w.anchor;return g&&x.splice(m,1,"row" in g&&"column" in g?g:undefined),q},b.on("click",f),b.on("changeSession",h),b.renderer.screenToTextCoordinates=u,b.setStyle("emacs-mode"),b.commands.addCommands(c),v.handler.platform=b.commands.platform,b.$emacsModeHandler=this,b.addEventListener("copy",this.onCopy),b.addEventListener("paste",this.onPaste)},v.handler.detach=function(b){delete b.renderer.screenToTextCoordinates,b.session.$selectLongWords=e,b.session.$useEmacsStyleLineStart=s,b.removeEventListener("click",f),b.removeEventListener("changeSession",h),b.unsetStyle("emacs-mode"),b.commands.removeCommands(c),b.removeEventListener("copy",this.onCopy),b.removeEventListener("paste",this.onPaste),b.$emacsModeHandler=null};var h=function(b){b.oldSession&&(b.oldSession.$selectLongWords=e,b.oldSession.$useEmacsStyleLineStart=s),e=b.session.$selectLongWords,b.session.$selectLongWords=!0,s=b.session.$useEmacsStyleLineStart,b.session.$useEmacsStyleLineStart=!0,b.session.hasOwnProperty("$emacsMark")||(b.session.$emacsMark=null),b.session.hasOwnProperty("$emacsMarkRing")||(b.session.$emacsMarkRing=[])},f=function(b){b.editor.session.$emacsMark=null},t=p("../lib/keys").KEY_MODS,n={C:"ctrl",S:"shift",M:"alt",CMD:"command"},o=["C-S-M-CMD","S-M-CMD","C-M-CMD","C-S-CMD","C-S-M","M-CMD","S-CMD","S-M","C-CMD","C-M","C-S","CMD","M","S","C"];o.forEach(function(g){var b=0;g.split("-").forEach(function(j){b|=t[n[j]]}),n[b]=g.toLowerCase()+"-"}),v.handler.onCopy=function(b,g){if(g.$handlesEmacsOnCopy){return}g.$handlesEmacsOnCopy=!0,v.handler.commands.killRingSave.exec(g),g.$handlesEmacsOnCopy=!1},v.handler.onPaste=function(g,b){b.pushEmacsMark(b.getCursorPosition())},v.handler.bindKey=function(j,b){typeof j=="object"&&(j=j[this.platform]);if(!j){return}var g=this.commandKeyBinding;j.split("|").forEach(function(k){k=k.toLowerCase(),g[k]=b;var m=k.split(" ").slice(0,-1);m.reduce(function(y,w,x){var q=y[x-1]?y[x-1]+" ":"";return y.concat([q+w])},[]).forEach(function(q){g[q]||(g[q]="null")})},this)},v.handler.getStatusText=function(j,b){var g="";return b.count&&(g+=b.count),b.keyChain&&(g+=" "+b.keyChain),g},v.handler.handleKeyboard=function(y,w,j,m){if(m===-1){return undefined}var g=y.editor;g._signal("changeStatus");if(w==-1){g.pushEmacsMark();if(y.count){var q=(new Array(y.count+1)).join(j);return y.count=null,{command:"insertstring",args:q}}}var k=n[w];if(k=="c-"||y.count){var x=parseInt(j[j.length-1]);if(typeof x=="number"&&!isNaN(x)){return y.count=Math.max(y.count,0)||0,y.count=10*y.count+x,{command:"null"}}}k&&(j=k+j),y.keyChain&&(j=y.keyChain+=" "+j);var z=this.commandKeyBinding[j];y.keyChain=z=="null"?j:"";if(!z){return undefined}if(z==="null"){return{command:"null"}}if(z==="universalArgument"){return y.count=-4,{command:"null"}}var b;typeof z!="string"&&(b=z.args,z.command&&(z=z.command),z==="goorselect"&&(z=g.emacsMark()?b[1]:b[0],b=null));if(typeof z=="string"){(z==="insertstring"||z==="splitline"||z==="togglecomment")&&g.pushEmacsMark(),z=this.commands[z]||g.commands.commands[z];if(!z){return undefined}}!z.readOnly&&!z.isYank&&(y.lastCommand=null),!z.readOnly&&g.emacsMark()&&g.setEmacsMark(null);if(y.count){var x=y.count;y.count=0;if(!z||!z.handlesCount){return{args:b,command:{exec:function(C,A){for(var B=0;B<x;B++){z.exec(C,A)}},multiSelectAction:z.multiSelectAction}}}b||(b={}),typeof b=="object"&&(b.count=x)}return{command:z,args:b}},v.emacsKeys={"Up|C-p":{command:"goorselect",args:["golineup","selectup"]},"Down|C-n":{command:"goorselect",args:["golinedown","selectdown"]},"Left|C-b":{command:"goorselect",args:["gotoleft","selectleft"]},"Right|C-f":{command:"goorselect",args:["gotoright","selectright"]},"C-Left|M-b":{command:"goorselect",args:["gotowordleft","selectwordleft"]},"C-Right|M-f":{command:"goorselect",args:["gotowordright","selectwordright"]},"Home|C-a":{command:"goorselect",args:["gotolinestart","selecttolinestart"]},"End|C-e":{command:"goorselect",args:["gotolineend","selecttolineend"]},"C-Home|S-M-,":{command:"goorselect",args:["gotostart","selecttostart"]},"C-End|S-M-.":{command:"goorselect",args:["gotoend","selecttoend"]},"S-Up|S-C-p":"selectup","S-Down|S-C-n":"selectdown","S-Left|S-C-b":"selectleft","S-Right|S-C-f":"selectright","S-C-Left|S-M-b":"selectwordleft","S-C-Right|S-M-f":"selectwordright","S-Home|S-C-a":"selecttolinestart","S-End|S-C-e":"selecttolineend","S-C-Home":"selecttostart","S-C-End":"selecttoend","C-l":"recenterTopBottom","M-s":"centerselection","M-g":"gotoline","C-x C-p":"selectall","C-Down":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"C-Up":{command:"goorselect",args:["gotopageup","selectpageup"]},"PageDown|C-v":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"PageUp|M-v":{command:"goorselect",args:["gotopageup","selectpageup"]},"S-C-Down":"selectpagedown","S-C-Up":"selectpageup","C-s":"iSearch","C-r":"iSearchBackwards","M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace",Backspace:"backspace","Delete|C-d":"del","Return|C-m":{command:"insertstring",args:"\n"},"C-o":"splitline","M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-W":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":"transposeletters","M-u":"touppercase","M-l":"tolowercase","M-/":"autocomplete","C-u":"universalArgument","M-;":"togglecomment","C-/|C-x u|S-C--|C-z":"undo","S-C-/|S-C-x u|C--|S-C-z":"redo","C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "}},v.handler.bindKeys(v.emacsKeys),v.handler.addCommands({recenterTopBottom:function(j){var m=j.renderer,g=m.$cursorLayer.getPixelPosition(),k=m.$size.scrollerHeight-m.lineHeight,b=m.scrollTop;Math.abs(g.top-b)<2?b=g.top-k:Math.abs(g.top-b-k*0.5)<2?b=g.top:b=g.top-k*0.5,j.session.setScrollTop(b)},selectRectangularRegion:function(b){b.multiSelect.toggleBlockSelection()},setMark:{exec:function(g,w){function b(){var y=g.popEmacsMark();y&&g.moveCursorToPosition(y)}if(w&&w.count){g.inMultiSelectMode?g.forEachSelection(b):b(),b();return}var j=g.emacsMark(),k=g.selection.getAllRanges(),x=k.map(function(y){return{row:y.start.row,column:y.start.column}}),m=!0,q=k.every(function(y){return y.isEmpty()});if(m&&(j||!q)){g.inMultiSelectMode?g.forEachSelection({exec:g.clearSelection.bind(g)}):g.clearSelection(),j&&g.pushEmacsMark(null);return}if(!j){x.forEach(function(y){g.pushEmacsMark(y)}),g.setEmacsMark(x[x.length-1]);return}},readOnly:!0,handlesCount:!0},exchangePointAndMark:{exec:function(k,g){var j=k.selection;if(!g.count&&!j.isEmpty()){j.setSelectionRange(j.getRange(),!j.isBackwards());return}if(g.count){var b={row:j.lead.row,column:j.lead.column};j.clearSelection(),j.moveCursorToPosition(k.emacsMarkForSelection(b))}else{j.selectToPosition(k.emacsMarkForSelection())}},readOnly:!0,handlesCount:!0,multiSelectAction:"forEach"},killWord:{exec:function(j,g){j.clearSelection(),g=="left"?j.selection.selectWordLeft():j.selection.selectWordRight();var k=j.getSelectionRange(),b=j.session.getTextRange(k);v.killRing.add(b),j.session.remove(k),j.clearSelection()},multiSelectAction:"forEach"},killLine:function(j){j.pushEmacsMark(null);var g=j.getCursorPosition();g.column===0&&j.session.doc.getLine(g.row).length===0?j.selection.selectLine():(j.clearSelection(),j.selection.selectLineEnd());var k=j.getSelectionRange(),b=j.session.getTextRange(k);v.killRing.add(b),j.session.remove(k),j.clearSelection()},yank:function(b){b.onPaste(v.killRing.get()||""),b.keyBinding.$data.lastCommand="yank"},yankRotate:function(b){if(b.keyBinding.$data.lastCommand!="yank"){return}b.undo(),b.session.$emacsMarkRing.pop(),b.onPaste(v.killRing.rotate()),b.keyBinding.$data.lastCommand="yank"},killRegion:{exec:function(b){v.killRing.add(b.getCopyText()),b.commands.byName.cut.exec(b)},readOnly:!0,multiSelectAction:"forEach"},killRingSave:{exec:function(j){j.$handlesEmacsOnCopy=!0;var g=j.session.$emacsMarkRing.slice(),b=[];v.killRing.add(j.getCopyText()),setTimeout(function(){function k(){var q=j.selection,m=q.getRange(),w=q.isBackwards()?m.end:m.start;b.push({row:w.row,column:w.column}),q.clearSelection()}j.$handlesEmacsOnCopy=!1,j.inMultiSelectMode?j.forEachSelection({exec:k}):k(),j.session.$emacsMarkRing=g.concat(b.reverse())},0)},readOnly:!0},keyboardQuit:function(b){b.selection.clearSelection(),b.setEmacsMark(null),b.keyBinding.$data.count=null},focusCommandLine:function(g,b){g.showCommandLine&&g.showCommandLine(b)}}),v.handler.addCommands(d.iSearchStartCommands);var c=v.handler.commands;c.yank.isYank=!0,c.yankRotate.isYank=!0,v.killRing={$data:[],add:function(b){b&&this.$data.push(b),this.$data.length>30&&this.$data.shift()},get:function(b){return b=b||1,this.$data.slice(this.$data.length-b,this.$data.length).reverse().join("\n")},pop:function(){return this.$data.length>1&&this.$data.pop(),this.get()},rotate:function(){return this.$data.unshift(this.$data.pop()),this.get()}}});